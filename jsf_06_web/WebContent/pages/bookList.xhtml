<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
	<title>Biblioteka</title>
	<meta charset="utf-8" />
	<meta name="viewport"
		content="width=device-width, initial-scale=1, shrink-to-fit=no" />

	<link
		href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700"
		rel="stylesheet" />

	<link
		href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700"
		rel="stylesheet" />

	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/open-iconic-bootstrap.min.css" />
	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/animate.css" />

	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/owl.carousel.min.css" />
	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/owl.theme.default.min.css" />
	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/magnific-popup.css" />

	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/aos.css" />

	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/ionicons.min.css" />

	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/bootstrap-datepicker.css" />
	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/jquery.timepicker.css" />


	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/flaticon.css" />
	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/icomoon.css" />
	<link rel="stylesheet"
		href="http://localhost:8080/jsf_06_web/resources/css/style.css" />
	<style type="text/css">
</style>
</h:head>
<body>

	<nav id="colorlib-main-nav" role="navigation">
		<a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle active"><i></i></a>
		<div class="js-fullheight colorlib-table">
			<div class="colorlib-table-cell js-fullheight">
				<div class="row">
					<div class="col-md-12 text-center">
						<ul>
							<c:set var="role" value="#{loginBB.takeRole()}" />
							<c:choose>
								<c:when test="${role != null}">
									<li><h:form>
											<h:commandLink class="logOf" value="Wylogowywanie"
												action="#{loginBB.doLogout}" />
										</h:form></li>
								</c:when>
								<c:otherwise>
									<li><a class="logIn"
										href="http://localhost:8080/jsf_06_web/pages/log.xhtml"><span>#{loginBB.label}</span></a></li>
								</c:otherwise>
							</c:choose>
							<li><a href="http://localhost:8080/jsf_06_web/index.xhtml"><span>Strona
										główna</span></a></li>
							<li><a
								href="http://localhost:8080/jsf_06_web/pages/basket.xhtml"><span>Wypożyczone</span></a></li>
							<li class="active"><a
								href="http://localhost:8080/jsf_06_web/pages/bookList.xhtml"><span>Lista
										książęk</span></a></li>
							<c:set var="role" value="#{loginBB.takeRole()}" />
							<c:choose>
								<c:when test="${role == 3}">
									<li><a
										href="http://localhost:8080/jsf_06_web/pages/listUser.xhtml"><span>Lista
												użytkowników</span></a></li>
									<li><a
										href="http://localhost:8080/jsf_06_web/pages/addBook.xhtml"><span>Dodaj
												książkę</span></a></li>
								</c:when>
							</c:choose>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</nav>

	<div id="colorlib-page">
		<header>
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle"><i></i></a>
					</div>
				</div>
			</div>
		</header>

		<section class="home-slider owl-carousel">
			<div class="slider-item"
				style="background-image: url('http://localhost:8080/jsf_06_web/resources/images/bg_3.jpg');"
				data-stellar-background-ratio="0.5">
				<div class="overlay"></div>
				<div class="container" data-scrollax-parent="true">
					<div class="row slider-text align-items-end">
						<div class="col-md-7 col-sm-12 ftco-animate mb-5">
							<h1 class="mb-3"
								data-scrollax=" properties: { translateY: '70%', opacity: .9}">Znajdź
								książkę dla siebie</h1>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section class="ftco-section">
			<div class="container">
				<div class="row justify-content-center mb-5 pb-5">
					<div class="col-md-7 text-center heading-section ftco-animate">
					</div>
					<div class="col-md-7 text-center heading-section ftco-animate">
						<h2>Lista książęk:</h2>
					</div>
				</div>
				<div class="row"></div>

				<p:panel header="Opcje wyszukiwania" toggleable="true"
					collapsed="true" style="margin-bottom: 1em;">
					<h:form>
						<h:panelGrid columns="3" cellpadding="5">
							<h:outputLabel value="tytuł:" />
							<p:inputText value="#{bookListBB.title}" />
							<p:commandButton value="Szukaj" update="form-table" />
						</h:panelGrid>
					</h:form>
				</p:panel>

				<p:messages />

				<h:form id="form-table" style="margin-bottom:1em;">

					<c:choose>
						<c:when test="${role == 3}">
							<a href="http://localhost:8080/jsf_06_web/pages/addBook.xhtml"
								class="txt2">Dodaj książkę</a>
						</c:when>
					</c:choose>

					<p:dataTable value="#{bookListBB.list}" var="m" paginator="true"
						rows="1"
						paginatorTemplate="{CurrentPageReport} {FirstPageLink}
             {PreviousPageLink} {PageLinks} {NextPageLink}
             {LastPageLink} {RowsPerPageDropdown}"
						rowsPerPageTemplate="1,4,8">

						<p:column priority="8">
							<f:facet name="header">
								<h:outputText value="Tytuł" />
							</f:facet>
							<h:outputText value="#{m.title}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Opis" />
							</f:facet>
							<h:outputText value="#{m.summary}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Gatunek" />
							</f:facet>
							<h:outputText value="#{m.genre}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Autor" />
							</f:facet>
							<h:outputText value="#{m.author}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="opcje" />
							</f:facet>

							<p:commandButton value="Wypożycz"
								action="#{loanListBB.rentBook(m)}" update="@form" ajax="false" />
							<c:choose>
								<c:when test="${role == 3}">
								<!-- 								 							 		<p:commandButton value="Edytuj" action="#{bookEditBB.goToEditPage(m)}" ajax="false"/> 
								 -->								 
															
									<p:commandButton value="Usuń"
										action="#{bookListBB.deleteBook(m)}" ajax="false"/>
								</c:when>
							</c:choose>


						</p:column>

					</p:dataTable>
				</h:form>

			</div>
		</section>

		<footer class="ftco-footer ftco-bg-dark ftco-section">
			<div class="container">
				<div class="row mb-5 justify-content-center">
					<div class="col-md-5 text-center">
						<div class="ftco-footer-widget mb-5">
							<h4 class="mb-4">The Wonderland Books</h4>
							<ul class="ftco-footer-social list-unstyled">
								<li class="ftco-animate"><a href="#"><span
										class="icon-twitter"></span></a></li>
								<li class="ftco-animate"><a href="#"><span
										class="icon-facebook"></span></a></li>
								<li class="ftco-animate"><a href="#"><span
										class="icon-instagram"></span></a></li>
							</ul>
						</div>
						<!-- 						<div class="ftco-footer-widget">
							<h2 class="mb-3">Skontaktuj się z nami</h2>
							<p class="h3 email">
								<a href="#">thewonderlandbooks@info.com</a>
							</p>
						</div> -->

					</div>
				</div>
				<div class="row">
					<div class="col-md-12 text-center">

						<p>
							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
							Copyright
							<script type="text/javascript">document.write(new Date().getFullYear());</script>
							All rights reserved | This template is made by <a
								href="https://colorlib.com" target="_blank">Colorlib</a>
							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						</p>
					</div>
				</div>
			</div>
		</footer>

		<!-- loader -->
		<div id="ftco-loader" class="show fullscreen">
			<svg class="circular" width="48px" height="48px">
				<circle class="path-bg" cx="24" cy="24" r="22" fill="none"
					stroke-width="4" stroke="#eeeeee" />
				<circle class="path" cx="24" cy="24" r="22" fill="none"
					stroke-width="4" stroke-miterlimit="10" stroke="#F96D00" /></svg>
		</div>

	</div>


	<script
		src="http://localhost:8080/jsf_06_web/resources/js/changeLog.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/jquery.min.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/jquery-migrate-3.0.1.min.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/popper.min.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/bootstrap.min.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/jquery.easing.1.3.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/jquery.waypoints.min.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/jquery.stellar.min.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/owl.carousel.min.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/jquery.magnific-popup.min.js"
		type="text/javascript"></script>
	<script src="http://localhost:8080/jsf_06_web/resources/js/aos.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/jquery.animateNumber.min.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/scrollax.min.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/bootstrap-datepicker.js"
		type="text/javascript"></script>
	<script
		src="http://localhost:8080/jsf_06_web/resources/js/jquery.timepicker.min.js"
		type="text/javascript"></script>
	<script src="http://localhost:8080/jsf_06_web/resources/js/main.js"
		type="text/javascript"></script>

</body>
</html>